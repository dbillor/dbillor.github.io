<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Full Post - Deni Billor</title>

  <link rel="stylesheet" href="style.css"/>

  <!-- More subtle or bright theme – 
       GitHub is more subtle, try “dracula.min.css” for more color -->
  <link 
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css"
  />

  <!-- highlight.js core + python language -->
  <script 
    src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js">
  </script>
  <script 
    src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js">
  </script>

  <!-- Marked.js -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
      hljs.highlightAll();
  </script>
  <script>
    // Register Python
    hljs.registerLanguage('python', hljsPython);

    // Marked + highlight
    marked.setOptions({
      gfm: true,
      breaks: true,
      highlight: function (code, lang) {
        if (lang && hljs.getLanguage(lang)) {
          return hljs.highlight(code, { language: lang }).value;
        }
        return hljs.highlightAuto(code).value;
      }
    });
  </script>
</head>
<body class="blog-body">
  <header class="navbar-wrapper">
    <nav class="navbar">
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="resume.html">Resume</a></li>
        <li><a href="blog.html">Blog</a></li>
      </ul>
    </nav>
  </header>

  <section class="blog-section">
    <h2 id="post-title">Loading Post...</h2>
    <div id="post-content" class="post-entry" style="text-align:left;"></div>
  </section>

  <footer class="footer">
    <p>&copy; 2025 Denizcan (Deni) Billor</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const params = new URLSearchParams(window.location.search);
      const filename = params.get('filename');
      const postContent = document.getElementById('post-content');
      const postTitle = document.getElementById('post-title');

      if (!filename) {
        postTitle.textContent = "No file specified!";
        return;
      }

      // Attempt to load the .md file from /posts/ directory
      fetch('posts/' + filename)
        .then(res => {
          if (!res.ok) {
            throw new Error(`Error loading ${filename}: ${res.status}`);
          }
          return res.text();
        })
        .then(markdown => {
          // Convert to HTML (with code highlighting)
          const html = marked.parse(markdown);
          postContent.innerHTML = html;

          // Optionally set the <h2> from the first line if the .md starts with "# ..."
          const firstLine = markdown.split('\n')[0].replace(/^#\s*/, '').trim();
          if (firstLine && firstLine.length < 80) {
            postTitle.textContent = firstLine;
          } else {
            postTitle.textContent = "Blog Post";
          }
        })
        .catch(err => {
          postTitle.textContent = "Error loading post";
          postContent.innerHTML = `<p style="color: #f66;">${err.message}</p>`;
        });
    });
  </script>
</body>
</html>
